<!DOCTYPE html>
<html lang="en">
<%- include('includes/head.ejs') %>
<body>
    <%- include('includes/header.ejs') %> 
    <main class="fade-in">
        <article class="blog-post">
            <header>
                <h1><%= post.title %></h1>
                <div class="post-meta">
                    <span class="author">Posted by <%= post.username %></span>
                    <span class="date">on <%= new Date(post.createdDate).toLocaleDateString('en-US', { 
                        year: 'numeric', 
                        month: 'long', 
                        day: 'numeric',
                        hour: '2-digit',
                        minute: '2-digit'
                    }) %></span>
                </div>
            </header>
            
            <div class="post-content">
                <%- filterUserHTML(post.body) %>
            </div>
            
            <% if (isAuthor) { %>
                <div class="post-actions">
                    <a href="/edit-post/<%= post.id %>" class="button edit-button">Edit Post</a>
                    <form style="display: inline;" action="/delete-post/<%= post.id %>" method="POST">
                        <button type="submit" class="button delete-button" onclick="return confirm('Are you sure you want to delete this post?')">Delete Post</button>
                    </form>
                </div>
            <% } %>
        </article>
    </main>
    <%- include('includes/footer.ejs') %>
</body>
</html>